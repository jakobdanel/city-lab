<!DOCTYPE html>
<html>

<head>
    <title> Urban Gardening </title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!--_____LEAFLET CSS_____-->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css"
        integrity="sha512-xodZBNTC5n17Xt2atTPuE1HxjVMSvLVW9ocqUKLsCC5CXdbqCmblAshOMAS6/keqq/sMZMZ19scR4PsZChSR7A=="
        crossorigin="" />
    <!--_____LEAFLET DRAW CSS_____-->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet.draw/0.4.2/leaflet.draw.css" />
    <!--_____OWN CSS_____-->
    <link rel="stylesheet" href="stylesheets/headerFooterCustom.css" />
    <link rel="stylesheet" href="stylesheets/leaflet_style.css">
    <link rel="stylesheet" href="stylesheets/style.css">
    <!--_____LEAFLET JAVASCRIPT_____-->
    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"
        integrity="sha512-XQoYMqMTK8LvdxXYG3nZ448hOEQiglfqkJs1NOQV44cWnUrBc8PkAOcXy20w0vlaXaVUearIOBhiXZ5V3ynxwA=="
        crossorigin=""></script>
    <!--_____LEAFLET DRAW JAVASCRIPT_____-->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet.draw/0.4.2/leaflet.draw.js"></script>
    <!--_____JQUERY AJAX JAVASCRIPT_____-->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css"
        integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>

<body>
    <div id="main" class="container-fluid no-gutters">
        <!--Navbar-->
        <nav class="navbar navbar-expand-lg navbar-dark  fixed-top p-1">
            <button class="navbar-toggler collapsed" type="button" data-toggle="collapse" data-target="#navbarContent"
                aria-controls="navbarContent" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>

            <div class="collapse navbar-collapse" id="navbarContent">
                <ul class="nav navbar-nav mr-auto mt-2 mt-lg-0">

                    <li class="nav-item">
                        <a class="nav-link active rounded" href="signin">Welcome</a>
                    </li>

                </ul>
            </div>
        </nav>
        <!--Main Content-->
        <div id="contentFrame" class="d-flex justify-content-center flex-wrap align-items-center p-5">
            <div id="textContent" class=" col col-lg-4 col-12 rounded text-center">
                
                <!-- registration form   -->
                
                
                   
                                <h2 class="text-uppercase text-center mb-5">Create an account</h2>
                  
                                <form>
                  
                                  <div class="form-outline mb-4">
                                    <label class="form-label" for="form3Example1cg">First Name</label>
                                    <input type="text" id="form3Example1cg" class="form-control form-control-lg" placeholder="Enter First Name" />
                                  </div>

                                  <div class="form-outline mb-4">
                                    <label class="form-label" for="form3Example1cg">Last Name</label>
                                    <input type="text" id="form3Example1cg" class="form-control form-control-lg" placeholder="Enter Last Name" />
                                  </div>

                                  <div class="form-outline mb-4">
                                    <label class="form-label" for="form3Example1cg">Your Username</label>
                                    <input type="text" id="form3Example1cg" class="form-control form-control-lg"  placeholder="Enter Username" />
                                  </div>
                  
                                  <div class="form-outline mb-4">
                                    <label class="form-label" for="form3Example3cg">Your Email</label>
                                    <input type="email" id="form3Example3cg" class="form-control form-control-lg" placeholder="Enter Email" />
                                  </div>
                  
                                  <div class="form-outline mb-4">
                                    <label class="form-label" for="form3Example4cg">Password</label>
                                    <input type="text" id="form3Example4cg" class="form-control form-control-lg" placeholder="Enter Password" />
                                  </div>
                  
                                  <div class="form-outline mb-4">
                                    <label class="form-label" for="form3Example4cdg">Repeat your password</label>
                                    <input type="text" id="form3Example4cdg" class="form-control form-control-lg" placeholder="Enter Password" />
                                  </div>
                  
                                  <!-- <div class="form-check d-flex justify-content-center mb-5">
                                    <input
                                      class="form-check-input me-2"
                                      type="checkbox"
                                      value=""
                                      id="form2Example3cg"
                                    />
                                   <label class="form-check-label" for="form2Example3g">
                                      I agree all statements in <a href="#!" class="text-body"><u>Terms of service</u></a>
                                    </label>
                                  </div> -->
                  
                                  <div class="d-flex justify-content-center">
                                    <button type="button" class="btn btn-success btn-block btn-lg gradient-custom-4 text-body">Register</button>
                                  </div>
                  
                                  <p class="text-center mt-5 mb-0">Already have an account? <a href="#!" class="fw-bold text-body"><u>Login here</u></a></p>
                  
                                </form>
                  <br>
                  <br>
                              
                  

    </div>
    </div>
    <!-- FOOTER-->
    <footer id="myFooter" class="row col col-12 d-flex flex-column align-items-left">
        <div class="row col col-12 d-flex flex-column ">
            <p><b>Links</b><br>
                <a href="https://www.uni-muenster.de/de/">University</a><br>
                <a href="https://github.com/jakobdanel/city-lab">GitHub Repository</a>
                <a href="impressum">Contact</a>
            </p>
        </div>
        <div id="copyrightText" class="footer-copyright">
            <p>Â© 2021 Urban Gardening Project </p>
        </div>
    </footer>

    <!-- JQUERY AND BOOTSTRAP JAVASCRIPT-->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"
        integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"
        integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p" crossorigin="anonymous">
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.min.js"
        integrity="sha384-w1Q4orYjBQndcko6MimVbzY0tgp4pWB4lZ7lr30WKz0vr/aWKhXdBNmNb5D92v7s" crossorigin="anonymous">
    </script>
    <!-- local script Ressources-->
    <!--<script src="javascript/plantcaretable.js"></script>-->
    <script src="javascript/startmap.js"></script>
    <script>
        // Select input-username, input-password, and input-submit by id
        const inputUsername = document.getElementById("input-username");
        const inputPassword = document.getElementById("input-password");
        const inputSubmit = document.getElementById("input-submit");

        const inputError = document.getElementById("input-error");
        async function login()  {
            // Get the value of the input-username and input-password
            const username = inputUsername.value;
            const password = inputPassword.value;

         
            // Create a new fetch request
            const response = await fetch("/api/login", {
                method: "POST",
                body: JSON.stringify( {
                    username: username,
                    password: password
                }),
                headers: {
                    "Content-Type": "application/json"
                }
                
            });
            // if status is 200, then login was successful
            if (response.status === 200) {
                // Get the response body
                const body = await response.json();
                // Set the cookie
                document.cookie = `token=${body.data.token}; path=/`;
                // Redirect to the home page
                window.location.href = "/";
            } else {
                // Get the response body
                const body = await response.json();
                // Display an error message
                inputError.innerHTML = body.message;
            }
        }

        // Add an event listener to the input-submit
        inputSubmit.addEventListener("click", ()=>{
            // Check that the submit form not redirect to another page
            event.preventDefault();
            // Call the login function
            login();
        });
    </script>
</body>

</html>